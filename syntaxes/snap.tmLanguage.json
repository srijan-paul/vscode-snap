{
  "$schema": "https://raw.githubusercontent.com/martinring/tmlanguage/master/tmlanguage.json",
  "name": "snap",
  "patterns": [{ "include": "#code" }],
  "repository": {
    "keywords": {
      "patterns": [
        {
          "name": "keyword.control.snap",
          "match": "\\b(?:if|while|for|return|else|import)\\b"
        },
        {
          "name": "keyword.operator.snap",
          "match": "\\b(?:is|not|or|and|typeof)\\b"
        },
        {
          "name": "keyword.operator.logical.snap",
          "match": "(&&|!|\\|\\|)"
        },
        {
          "name": "keyword.operator.arithmetic.snap",
          "match": "\\b(\\+|\\-|\\*|/|%|\\^|<<|>>|\\#)\\b"
        },
        {
          "name": "keyword.operator.assignment.snap",
          "match": "(=)"
        },
        {
          "name": "keyword.operator.assignment.snap",
          "match": "(==|!=|>=|<=|>|<)"
        },
        {
          "name": "keyword.other",
          "match": "\\b(let|const|foreach|fn)\\b"
        },
        {
          "name": "support.function.snap",
          "match": "\\b(import|delete|setmeta|error)\\b"
        }
      ]
    },

    "constants": {
      "patterns": [
        {
          "name": "constant.numeric.snap",
          "match": "\\b(0x[0-9a-fA-F]*|[0-9]+(\\.?[0-9]*)?(e(\\+|-)?[0-9]+)?)\\b"
        },
        {
          "name": "constant.language.snap",
          "match": "\\b(true|false|nil)\\b"
        }
      ]
    },

    "strings": {
      "name": "string.quoted.double.snap",
      "begin": "\"",
      "end": "\"",
      "patterns": [
        {
          "name": "constant.character.escape.snap",
          "match": "\\\\."
        }
      ]
    },

    "block": {
      "begin": "{",
      "beginCaptures": { "0": { "name": "punctuation.section.block.begin.snap" } },
      "end": "}",
      "endCaptures": { "0": { "name": "punctuation.section.block.end.snap" } },
      "patterns": [{ "include": "#code" }]
    },

    "variables": {
      "patterns": [
        { "name": "variable.language.snap", "match": "\\b(self)\\b" },
        { "name": "variable.snap", "match": "\\b[a-zA-Z_][a-zA-Z0-9_]*\\b" },
        { "name": "variable.other.snap", "match": "\\b[a-zA-Z_][a-zA-Z0-9_]*\\s*:" }
      ]
    },

    "function": {
      "patterns": [
        {
          "match": "\\b([a-zA-Z_][A-Za-z0-9_]*)\\s*\\(",
          "captures": { "1": { "name": "entity.name.function.snap" } }
        }
      ]
    },

    "class": {
      "patterns": [
        {
          "match": "\\b(class)\\s+([a-zA-Z_][A-Za-z0-9_]*)",
          "captures": {
            "1": { "name": "keyword.other" },
            "2": { "name": "entity.name.class" }
          }
        }
      ]
    },

    "table": {
      "patterns": [
        {
          "match": "\\b([a-zA-Z_][A-Za-z0-9_]*)\\s*(:)",
          "captures": {
            "1": { "name": "entity.name.tag.snap" },
            "2": { "name": "constant.character.snap" }
          }
        },
        {
          "match": "\\b([a-zA-Z_][A-Za-z0-9_]*)\\s*(\\.)",
          "captures": {
            "1": { "name": "entity.name.tag.snap" },
            "2": { "name": "constant.character.snap" }
          }
        }
      ]
    },

    "code": {
      "patterns": [
        { "include": "#keywords" },
        { "include": "#strings" },
        { "include": "#block" },
        { "include": "#constants" },
        { "include": "#function" },
        { "include": "#table" },
        { "include": "#class" },
        { "include": "#variables" }
      ]
    }
  },
  "scopeName": "source.snap"
}
